<form action="{{url_for('show_class', user_name = user_name, class_name = class_name)}}" method="POST">

  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <link rel="stylesheet" href="{{ url_for('static', filename='styletemplate.css') }}" />
  </head>
  <body>
      <div>
          <div class="header">
              <img class="top-logo" src="{{ url_for('static', filename='template_general/imagenes/campana.png') }}">
              <a href="{{ url_for('main_window') }}">
                <img type="image" src="{{ url_for('static', filename='template_general/imagenes/logoout.jpg') }}" class="top-logo">
              </a>
          </div>
          <div class="row">
              <div class="col-3 menu">
              <ul>
                <li><a href="{{url_for('main_teacher', user_name = user_name)}}">
                <div class="menu-box"><p>Mis materias</p><img src="{{ url_for('static', filename='template_general/imagenes/teach.png') }}" style="background-color: white;" width="30px" width="30px"></div></a></li>
                <li><a href="{{url_for('class_history', user_name = user_name)}}">
                <div class="menu-box"><p>Historial de materias</p><img src="{{ url_for('static', filename='template_general/imagenes/history.png') }}" width="30px" width="30px" style="background-color:white ;"></div></a></li>
              </ul>
              </div>

              <div class="col-9">
                <div style="display:block;">
                  <span style="margin-left:0px;">
                    <a href="{{url_for('main_teacher', user_name = user_name)}}" class="btn">
                        <img src="{{ url_for('static', filename='template_general/imagenes/retorno.png') }}" height="13px" width="13px">
                    </a>
                  </span>
                  <div style="diplay:inline-block; text-align:center; width:80%;">
                    <span class="mini-titulo">
                      Listado de estudiantes del curso {{class_name}}
                    </span>
                  </div>
                </div>
                <table class="center" id="table">
                      <tr>
                          <th>Estudiantes</th>
                          <th>Corte1</th>
                          <th>Corte2</th>
                          <th>Corte3</th>
                          <th>Corte4</th>
                          <th>Corte5</th>
                          <th>Nota final</th>
                      </tr>
                      {% for student in students_class %}
                      <tr>
                          <td>{{student.1}} {{student.2}} {{student.3}}</td>
                          <td>{{student.4}}</td>
                          <td>{{student.5}}</td>
                          <td>{{student.6}}</td>
                          <td>{{student.7}}</td>
                          <td>{{student.8}}</td>
                          <td>{{student.9}}</td>
                      </tr>
                      {% endfor %}
                  </table>
                  <br>
                  <br>
                  <a href="/class_edit/{{user_name}}/{{class_name}}" class="btn" style="color: black;">Editar</a>
                  <a id="downloadLink" onclick="exportF(this)" class="btn" style="color: black;">Descargar</a>
                  <form action="subir-archivo" enctype=multipart/form-data>
                    <input type="file" name="file" id="file" class="inputfile" data-multiple-caption="{count} files selected" multiple/>
                    <label for="file" class="archivo">seleccionar archivo</label>
                    <input type="submit" class="btn" value="subir" >
                  </form>
              </div>
          </div>
      </div>
  <script>
  function habilitar(){
      var casillas_notas=document.getElementsByClassName("table-toggle");
      for(var i=0;i<casillas_notas.length;i++){
          casillas_notas[i].readOnly=false;
      }
      document.getElementById("boton-editar").style.backgroundColor="#073D72";
      document.getElementById("boton-editar").setAttribute("onclick","deshabilitar()");
  }
  function exportF(elem) {
    var table = document.getElementById("table");
    var html = table.outerHTML;
    var url = 'data:application/vnd.ms-excel,' + escape(html); // Set your html table into url
    elem.setAttribute("href", url);
    elem.setAttribute("download", "notas.xls"); // Choose the file name
    return false;
  }
  function deshabilitar(){
      var casillas_notas=document.getElementsByClassName("table-toggle");
      for(var i=0;i<casillas_notas.length;i++){
          casillas_notas[i].readOnly=true;
      }
      document.getElementById("boton-editar").style.backgroundColor="white";
      document.getElementById("boton-editar").setAttribute("onclick","habilitar()");
  }
  var inputs = document.querySelectorAll( '.inputfile' );
  Array.prototype.forEach.call( inputs, function( input )
  {
  	var label	 = input.nextElementSibling,
  		labelVal = label.innerHTML;

  	input.addEventListener( 'change', function( e )
  	{
  		var fileName = '';
  		if( this.files && this.files.length > 1 )
  			fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
  		else
  			fileName = e.target.value.split( '\\' ).pop();

  		if( fileName )
  			label.innerHTML = fileName;
  		else
  			label.innerHTML = labelVal;
          console.log("event listener");
  	});
      console.log("add event")
  });
  </script>
  </body>
  </html>
  </form>
